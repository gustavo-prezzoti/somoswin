# =====================================
# Win AI Backend - Docker Profile
# =====================================
# Ativado com: SPRING_PROFILES_ACTIVE=docker
# =====================================

spring.application.name=winai

# ========================================
# Database Configuration
# ========================================
# Uses environment variables from Docker Compose
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/postgres?currentSchema=winai}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.default_schema=${SPRING_JPA_PROPERTIES_HIBERNATE_DEFAULT_SCHEMA:public}

# Flyway Migration Configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.schemas=${SPRING_FLYWAY_SCHEMAS:public}
spring.flyway.default-schema=${SPRING_FLYWAY_DEFAULT_SCHEMA:public}
spring.flyway.baseline-on-migrate=true

# Connection Pool Configuration (HikariCP) - Otimizado para container
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000

# ========================================
# JWT Configuration
# ========================================
jwt.secret=${JWT_SECRET:V2luQUlCYWNrZW5kU2VjcmV0S2V5Rm9ySldUVG9rZW5zMjAyNSFAIyQlXiYqKCk=}
jwt.expiration=${JWT_EXPIRATION:3600000}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# ========================================
# Supabase API Keys
# ========================================
supabase.url=${SUPABASE_URL:https://example.supabase.co}
supabase.anon-key=${SUPABASE_ANON_KEY:}
supabase.service-role-key=${SUPABASE_SERVICE_ROLE_KEY:}

# ========================================
# Google APIs (Drive/Calendar)
# ========================================
google.client.id=${GOOGLE_CLIENT_ID:}
google.client.secret=${GOOGLE_CLIENT_SECRET:}
google.redirect.uri=${GOOGLE_REDIRECT_URI:http://localhost:8080/api/v1/drive/callback}
app.frontend.url=${APP_FRONTEND_URL:http://localhost:3000}

# ========================================
# Server Configuration
# ========================================
server.port=8080
server.error.include-message=always
server.error.include-binding-errors=always

# ========================================
# Actuator (Health Checks for Docker)
# ========================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# ========================================
# Multipart File Upload Configuration
# ========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=1GB
spring.servlet.multipart.max-request-size=1GB

# ========================================
# Uazap WhatsApp API Configuration
# ========================================
uazap.default-base-url=${UAZAP_BASE_URL}
uazap.default-token=${UAZAP_TOKEN}
uazap.default-instance=${UAZAP_INSTANCE}
uazap.admin-token=${UAZAP_ADMIN_TOKEN}

# ========================================
# Logging (Container optimized)
# ========================================
logging.level.root=INFO
logging.level.com.backend.winai=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
